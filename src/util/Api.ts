
const baseUrl = 'https://api.openweathermap.org/data/2.5/';
const apiKey = '6a703ad20e8fe394b475a7a2450b2c65';

export function getCurrentWeather(city: string) {
  return fetch(`${baseUrl}weather?q=${city}&appid=${apiKey}&units=metric`)
    .then((res) => {
      if (res.status === 200) {
        return res.json();
      }
      throw new Error(res.statusText);
    });
}

export function getCurrentWeatherForPosition(lat: number, lon: number) {
  return fetch(`${baseUrl}weather?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric`)
    .then((res) => {
      if (res.status === 200) {
        return res.json();
      }
      throw new Error(res.statusText);
    });
}

export function getWeatherForecastForPosition(lat: number, lon: number) {
  return fetch(`${baseUrl}forecast?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric`)
    .then((res) => {
      if (res.status === 200) {
        return res.json();
      }
      throw new Error(res.statusText);
    });
}

export function getCurrentWeathers(ids: any) {
  return fetch(`${baseUrl}group?id=${ids}&appid=${apiKey}&units=metric`)
    .then((res) => {
      if (res.status === 200) {
        return res.json();
      }
      throw new Error(res.statusText);
    });
}

export function getWeatherForecast(id: string) {
  return fetch(`${baseUrl}forecast?id=${id}&appid=${apiKey}&units=metric`)
    .then((res) => {
      if (res.status === 200) {
        return res.json();
      }
      throw new Error(res.statusText);
    });
// return new Promise(resolve => resolve()).then(() => JSON.parse('{"cod":"200","message":0.0024,"cnt":37,"list":[{"dt":1526029200,"main":{"temp":22.52,"temp_min":22.52,"temp_max":24.42,"pressure":1027.3,"sea_level":1032.38,"grnd_level":1027.3,"humidity":37,"temp_kf":-1.9},"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02d"}],"clouds":{"all":20},"wind":{"speed":3.93,"deg":151.001},"sys":{"pod":"d"},"dt_txt":"2018-05-11 09:00:00"},{"dt":1526040000,"main":{"temp":25.09,"temp_min":25.09,"temp_max":26.51,"pressure":1027.66,"sea_level":1032.66,"grnd_level":1027.66,"humidity":34,"temp_kf":-1.42},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"02d"}],"clouds":{"all":8},"wind":{"speed":5.11,"deg":151.507},"sys":{"pod":"d"},"dt_txt":"2018-05-11 12:00:00"},{"dt":1526050800,"main":{"temp":24.46,"temp_min":24.46,"temp_max":25.41,"pressure":1027.99,"sea_level":1033.06,"grnd_level":1027.99,"humidity":36,"temp_kf":-0.95},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":4.82,"deg":155.001},"sys":{"pod":"d"},"dt_txt":"2018-05-11 15:00:00"},{"dt":1526061600,"main":{"temp":21.73,"temp_min":21.73,"temp_max":22.21,"pressure":1028.73,"sea_level":1033.72,"grnd_level":1028.73,"humidity":40,"temp_kf":-0.47},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":4.23,"deg":159.01},"sys":{"pod":"d"},"dt_txt":"2018-05-11 18:00:00"},{"dt":1526072400,"main":{"temp":18.49,"temp_min":18.49,"temp_max":18.49,"pressure":1030.32,"sea_level":1035.26,"grnd_level":1030.32,"humidity":46,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}],"clouds":{"all":0},"wind":{"speed":3.47,"deg":156.003},"sys":{"pod":"n"},"dt_txt":"2018-05-11 21:00:00"},{"dt":1526083200,"main":{"temp":16.55,"temp_min":16.55,"temp_max":16.55,"pressure":1031.15,"sea_level":1036.08,"grnd_level":1031.15,"humidity":49,"temp_kf":0},"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03n"}],"clouds":{"all":36},"wind":{"speed":2.66,"deg":154.507},"sys":{"pod":"n"},"dt_txt":"2018-05-12 00:00:00"},{"dt":1526094000,"main":{"temp":15.68,"temp_min":15.68,"temp_max":15.68,"pressure":1031.57,"sea_level":1036.53,"grnd_level":1031.57,"humidity":48,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":2.25,"deg":151},"sys":{"pod":"d"},"dt_txt":"2018-05-12 03:00:00"},{"dt":1526104800,"main":{"temp":19.27,"temp_min":19.27,"temp_max":19.27,"pressure":1031.89,"sea_level":1036.84,"grnd_level":1031.89,"humidity":38,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":2.31,"deg":153.501},"sys":{"pod":"d"},"dt_txt":"2018-05-12 06:00:00"},{"dt":1526115600,"main":{"temp":23.17,"temp_min":23.17,"temp_max":23.17,"pressure":1031.91,"sea_level":1036.95,"grnd_level":1031.91,"humidity":31,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":3.56,"deg":150.5},"sys":{"pod":"d"},"dt_txt":"2018-05-12 09:00:00"},{"dt":1526126400,"main":{"temp":24.13,"temp_min":24.13,"temp_max":24.13,"pressure":1031.87,"sea_level":1036.9,"grnd_level":1031.87,"humidity":27,"temp_kf":0},"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02d"}],"clouds":{"all":20},"wind":{"speed":4.11,"deg":157.503},"sys":{"pod":"d"},"dt_txt":"2018-05-12 12:00:00"},{"dt":1526137200,"main":{"temp":23.59,"temp_min":23.59,"temp_max":23.59,"pressure":1031.55,"sea_level":1036.54,"grnd_level":1031.55,"humidity":30,"temp_kf":0},"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02d"}],"clouds":{"all":20},"wind":{"speed":3.91,"deg":162.001},"sys":{"pod":"d"},"dt_txt":"2018-05-12 15:00:00"},{"dt":1526148000,"main":{"temp":21.17,"temp_min":21.17,"temp_max":21.17,"pressure":1031.79,"sea_level":1036.81,"grnd_level":1031.79,"humidity":35,"temp_kf":0},"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02d"}],"clouds":{"all":12},"wind":{"speed":3.57,"deg":166.503},"sys":{"pod":"d"},"dt_txt":"2018-05-12 18:00:00"},{"dt":1526158800,"main":{"temp":17.78,"temp_min":17.78,"temp_max":17.78,"pressure":1032.84,"sea_level":1037.85,"grnd_level":1032.84,"humidity":38,"temp_kf":0},"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02n"}],"clouds":{"all":12},"wind":{"speed":2.76,"deg":163.503},"sys":{"pod":"n"},"dt_txt":"2018-05-12 21:00:00"},{"dt":1526169600,"main":{"temp":15.17,"temp_min":15.17,"temp_max":15.17,"pressure":1033.53,"sea_level":1038.5,"grnd_level":1033.53,"humidity":38,"temp_kf":0},"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02n"}],"clouds":{"all":20},"wind":{"speed":2.07,"deg":160.505},"sys":{"pod":"n"},"dt_txt":"2018-05-13 00:00:00"},{"dt":1526180400,"main":{"temp":13.12,"temp_min":13.12,"temp_max":13.12,"pressure":1033.39,"sea_level":1038.44,"grnd_level":1033.39,"humidity":47,"temp_kf":0},"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03d"}],"clouds":{"all":32},"wind":{"speed":1.41,"deg":134.001},"sys":{"pod":"d"},"dt_txt":"2018-05-13 03:00:00"},{"dt":1526191200,"main":{"temp":17.57,"temp_min":17.57,"temp_max":17.57,"pressure":1033.35,"sea_level":1038.28,"grnd_level":1033.35,"humidity":33,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"02d"}],"clouds":{"all":8},"wind":{"speed":1.56,"deg":133.506},"sys":{"pod":"d"},"dt_txt":"2018-05-13 06:00:00"},{"dt":1526202000,"main":{"temp":22.8,"temp_min":22.8,"temp_max":22.8,"pressure":1032.6,"sea_level":1037.63,"grnd_level":1032.6,"humidity":26,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":1.57,"deg":147},"sys":{"pod":"d"},"dt_txt":"2018-05-13 09:00:00"},{"dt":1526212800,"main":{"temp":25.52,"temp_min":25.52,"temp_max":25.52,"pressure":1031.69,"sea_level":1036.79,"grnd_level":1031.69,"humidity":23,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":2.27,"deg":165.002},"sys":{"pod":"d"},"dt_txt":"2018-05-13 12:00:00"},{"dt":1526223600,"main":{"temp":25.5,"temp_min":25.5,"temp_max":25.5,"pressure":1030.54,"sea_level":1035.61,"grnd_level":1030.54,"humidity":20,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":2.26,"deg":160.001},"sys":{"pod":"d"},"dt_txt":"2018-05-13 15:00:00"},{"dt":1526234400,"main":{"temp":22.82,"temp_min":22.82,"temp_max":22.82,"pressure":1030.11,"sea_level":1035.14,"grnd_level":1030.11,"humidity":22,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":2.2,"deg":142.501},"sys":{"pod":"d"},"dt_txt":"2018-05-13 18:00:00"},{"dt":1526245200,"main":{"temp":17.01,"temp_min":17.01,"temp_max":17.01,"pressure":1030.81,"sea_level":1035.73,"grnd_level":1030.81,"humidity":32,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"02n"}],"clouds":{"all":8},"wind":{"speed":2.06,"deg":131.501},"sys":{"pod":"n"},"dt_txt":"2018-05-13 21:00:00"},{"dt":1526256000,"main":{"temp":12.91,"temp_min":12.91,"temp_max":12.91,"pressure":1030.77,"sea_level":1035.77,"grnd_level":1030.77,"humidity":52,"temp_kf":0},"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02n"}],"clouds":{"all":12},"wind":{"speed":1.25,"deg":88.501},"sys":{"pod":"n"},"dt_txt":"2018-05-14 00:00:00"},{"dt":1526266800,"main":{"temp":11.34,"temp_min":11.34,"temp_max":11.34,"pressure":1030.41,"sea_level":1035.41,"grnd_level":1030.41,"humidity":62,"temp_kf":0},"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02d"}],"clouds":{"all":24},"wind":{"speed":1.07,"deg":34.0007},"sys":{"pod":"d"},"dt_txt":"2018-05-14 03:00:00"},{"dt":1526277600,"main":{"temp":18.31,"temp_min":18.31,"temp_max":18.31,"pressure":1030.1,"sea_level":1035.05,"grnd_level":1030.1,"humidity":31,"temp_kf":0},"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02d"}],"clouds":{"all":20},"wind":{"speed":1.6,"deg":37.0036},"sys":{"pod":"d"},"dt_txt":"2018-05-14 06:00:00"},{"dt":1526288400,"main":{"temp":23.24,"temp_min":23.24,"temp_max":23.24,"pressure":1029.44,"sea_level":1034.43,"grnd_level":1029.44,"humidity":26,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":2.75,"deg":54.5003},"sys":{"pod":"d"},"dt_txt":"2018-05-14 09:00:00"},{"dt":1526299200,"main":{"temp":25.02,"temp_min":25.02,"temp_max":25.02,"pressure":1028.51,"sea_level":1033.6,"grnd_level":1028.51,"humidity":26,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":3.46,"deg":54.5013},"sys":{"pod":"d"},"dt_txt":"2018-05-14 12:00:00"},{"dt":1526310000,"main":{"temp":23.99,"temp_min":23.99,"temp_max":23.99,"pressure":1027.87,"sea_level":1032.91,"grnd_level":1027.87,"humidity":26,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":3.66,"deg":51.5035},"sys":{"pod":"d"},"dt_txt":"2018-05-14 15:00:00"},{"dt":1526320800,"main":{"temp":20.49,"temp_min":20.49,"temp_max":20.49,"pressure":1027.7,"sea_level":1032.59,"grnd_level":1027.7,"humidity":29,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":3.56,"deg":41.5016},"sys":{"pod":"d"},"dt_txt":"2018-05-14 18:00:00"},{"dt":1526331600,"main":{"temp":15.8,"temp_min":15.8,"temp_max":15.8,"pressure":1027.8,"sea_level":1032.69,"grnd_level":1027.8,"humidity":33,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}],"clouds":{"all":0},"wind":{"speed":3.25,"deg":31.5009},"sys":{"pod":"n"},"dt_txt":"2018-05-14 21:00:00"},{"dt":1526342400,"main":{"temp":13.3,"temp_min":13.3,"temp_max":13.3,"pressure":1027.01,"sea_level":1032,"grnd_level":1027.01,"humidity":58,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}],"clouds":{"all":0},"wind":{"speed":3.32,"deg":20.002},"sys":{"pod":"n"},"dt_txt":"2018-05-15 00:00:00"},{"dt":1526353200,"main":{"temp":12.08,"temp_min":12.08,"temp_max":12.08,"pressure":1026.25,"sea_level":1031.29,"grnd_level":1026.25,"humidity":65,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"02d"}],"clouds":{"all":8},"wind":{"speed":3.57,"deg":18.5008},"sys":{"pod":"d"},"dt_txt":"2018-05-15 03:00:00"},{"dt":1526364000,"main":{"temp":14.84,"temp_min":14.84,"temp_max":14.84,"pressure":1026.49,"sea_level":1031.4,"grnd_level":1026.49,"humidity":48,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":3.41,"deg":19.5006},"sys":{"pod":"d"},"dt_txt":"2018-05-15 06:00:00"},{"dt":1526374800,"main":{"temp":19.86,"temp_min":19.86,"temp_max":19.86,"pressure":1026.76,"sea_level":1031.69,"grnd_level":1026.76,"humidity":35,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":3.81,"deg":31.0015},"sys":{"pod":"d"},"dt_txt":"2018-05-15 09:00:00"},{"dt":1526385600,"main":{"temp":22.12,"temp_min":22.12,"temp_max":22.12,"pressure":1027.34,"sea_level":1032.38,"grnd_level":1027.34,"humidity":34,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":3.61,"deg":50.004},"sys":{"pod":"d"},"dt_txt":"2018-05-15 12:00:00"},{"dt":1526396400,"main":{"temp":22.08,"temp_min":22.08,"temp_max":22.08,"pressure":1027.7,"sea_level":1032.76,"grnd_level":1027.7,"humidity":36,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"02d"}],"clouds":{"all":8},"wind":{"speed":3.87,"deg":46.5011},"sys":{"pod":"d"},"dt_txt":"2018-05-15 15:00:00"},{"dt":1526407200,"main":{"temp":17.23,"temp_min":17.23,"temp_max":17.23,"pressure":1028.84,"sea_level":1033.74,"grnd_level":1028.84,"humidity":51,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":76},"wind":{"speed":3.77,"deg":29.5015},"rain":{"3h":0.03},"sys":{"pod":"d"},"dt_txt":"2018-05-15 18:00:00"},{"dt":1526418000,"main":{"temp":12.07,"temp_min":12.07,"temp_max":12.07,"pressure":1030.05,"sea_level":1034.96,"grnd_level":1030.05,"humidity":71,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":12},"wind":{"speed":3.01,"deg":14.5044},"rain":{"3h":0.145},"sys":{"pod":"n"},"dt_txt":"2018-05-15 21:00:00"}],"city":{"id":2666199,"name":"Uppsala","coord":{"lat":59.8585,"lon":17.6454},"country":"SE"}}'));
}
